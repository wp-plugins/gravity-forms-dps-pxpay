/*! script for supporting the Gravity Forms DPS PxPay feed admin page */
;jQuery(function(b){var d;b("select[name='_gfdpspxpay_form']").change(function(){d=b(this).val();b(".gfdpspxpay-feed-fields select option").remove();if(d){b.ajax({type:"GET",url:ajaxurl,cache:false,dataType:"text",data:{action:"gfdpspxpay_form_has_feed",id:d},success:a})}});b("form#post").submit(function(e){if(b("select[name='_gfdpspxpay_merchant_ref']",this).val()===""){e.preventDefault();window.alert("You must map the Merchant Reference to a field in the form, or payment will not be processed!")}});function a(e){var f=parseInt(b("input[name='post_ID']").val(),10);e=parseInt(e,10);if(e&&e!=f){window.alert("That form already has a feed.")}else{b.ajax({type:"GET",url:ajaxurl,cache:false,dataType:"html",data:{action:"gfdpspxpay_form_fields",id:d},success:c})}}function c(e){b(".gfdpspxpay-feed-fields select").each(function(){b(this).html(e)})}});